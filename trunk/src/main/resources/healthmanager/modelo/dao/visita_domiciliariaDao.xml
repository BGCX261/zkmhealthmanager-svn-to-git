<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="healthmanager.modelo.dao.Visita_domiciliariaDao">

	

	<resultMap id="visita_domiciliariaMap" type="visita_domiciliaria">
		<result column="codigo_empresa" property="codigo_empresa" />
		<result column="codigo_sucursal" property="codigo_sucursal" />
		<result column="codigo_historia" property="codigo_historia" />
		<result column="identificacion" property="identificacion" />
		<result column="fecha_inicial" property="fecha_inicial" />
		<result column="nro_ingreso" property="nro_ingreso" />
		<result column="notifica" property="notifica" />
		<result column="otros_notifica" property="otros_notifica" />
		<result column="barrio" property="barrio" />
		<result column="localidad" property="localidad" />
		<result column="codigo_usuario" property="codigo_usuario" />
		<result column="parentesco" property="parentesco" />
		<result column="familiar_nombre1" property="familiar_nombre1" />
		<result column="familiar_edad1" property="familiar_edad1" />
		<result column="familiar_escolaridad1" property="familiar_escolaridad1" />
		<result column="familiar_parentesco1" property="familiar_parentesco1" />
		<result column="familiar_ocupacion1" property="familiar_ocupacion1" />
		<result column="familiar_nombre2" property="familiar_nombre2" />
		<result column="familiar_edad2" property="familiar_edad2" />
		<result column="familiar_escolaridad2" property="familiar_escolaridad2" />
		<result column="familiar_parentesco2" property="familiar_parentesco2" />
		<result column="familiar_ocupacion2" property="familiar_ocupacion2" />
		<result column="familiar_nombre3" property="familiar_nombre3" />
		<result column="familiar_edad3" property="familiar_edad3" />
		<result column="familiar_escolaridad3" property="familiar_escolaridad3" />
		<result column="familiar_parentesco3" property="familiar_parentesco3" />
		<result column="familiar_ocupacion3" property="familiar_ocupacion3" />
		<result column="familiar_nombre4" property="familiar_nombre4" />
		<result column="familiar_edad4" property="familiar_edad4" />
		<result column="familiar_escolaridad4" property="familiar_escolaridad4" />
		<result column="familiar_parentesco4" property="familiar_parentesco4" />
		<result column="familiar_ocupacion4" property="familiar_ocupacion4" />
		<result column="familiar_nombre5" property="familiar_nombre5" />
		<result column="familiar_edad5" property="familiar_edad5" />
		<result column="familiar_escolaridad5" property="familiar_escolaridad5" />
		<result column="familiar_parentesco5" property="familiar_parentesco5" />
		<result column="familiar_ocupacion5" property="familiar_ocupacion5" />
		<result column="familiar_nombre6" property="familiar_nombre6" />
		<result column="familiar_edad6" property="familiar_edad6" />
		<result column="familiar_escolaridad6" property="familiar_escolaridad6" />
		<result column="familiar_parentesco6" property="familiar_parentesco6" />
		<result column="familiar_ocupacion6" property="familiar_ocupacion6" />
		<result column="familiar_nombre7" property="familiar_nombre7" />
		<result column="familiar_edad7" property="familiar_edad7" />
		<result column="familiar_escolaridad7" property="familiar_escolaridad7" />
		<result column="familiar_parentesco7" property="familiar_parentesco7" />
		<result column="familiar_ocupacion7" property="familiar_ocupacion7" />
		<result column="familiar_nombre8" property="familiar_nombre8" />
		<result column="familiar_edad8" property="familiar_edad8" />
		<result column="familiar_escolaridad8" property="familiar_escolaridad8" />
		<result column="familiar_parentesco8" property="familiar_parentesco8" />
		<result column="familiar_ocupacion8" property="familiar_ocupacion8" />
		<result column="familiar_nombre9" property="familiar_nombre9" />
		<result column="familiar_edad9" property="familiar_edad9" />
		<result column="familiar_escolaridad9" property="familiar_escolaridad9" />
		<result column="familiar_parentesco9" property="familiar_parentesco9" />
		<result column="familiar_ocupacion9" property="familiar_ocupacion9" />
		<result column="familiar_nombre10" property="familiar_nombre10" />
		<result column="familiar_edad10" property="familiar_edad10" />
		<result column="familiar_escolaridad10" property="familiar_escolaridad10" />
		<result column="familiar_parentesco10" property="familiar_parentesco10" />
		<result column="familiar_ocupacion10" property="familiar_ocupacion10" />
		<result column="techo" property="techo" />
		<result column="piso" property="piso" />
		<result column="paredes" property="paredes" />
		<result column="no_habitaciones" property="no_habitaciones" />
		<result column="eliminacion_excretas" property="eliminacion_excretas" />
		<result column="recoleccion" property="recoleccion" />
		<result column="agua_potable" property="agua_potable" />
		<result column="enfermedad_actual" property="enfermedad_actual" />
		<result column="recibido_medico" property="recibido_medico" />
		<result column="tipo_atencion" property="tipo_atencion" />
		<result column="entidad" property="entidad" />
		<result column="profesional" property="profesional" />
		<result column="motivo" property="motivo" />
		<result column="historia_enfermedad_actual" property="historia_enfermedad_actual" />
		<result column="acciones_pyp" property="acciones_pyp" />
		<result column="canalizacion" property="canalizacion" />
		<result column="entidad_canalizacion" property="entidad_canalizacion" />
		<result column="tratamiento_actual" property="tratamiento_actual" />
		<result column="actitud_familiares" property="actitud_familiares" />
		<result column="percepcion" property="percepcion" />
		<result column="disposicion" property="disposicion" />
		<result column="percepcion_paciente" property="percepcion_paciente" />
		<result column="observacion" property="observacion" />
		<result column="seguimiento" property="seguimiento" />
		<result column="recomendacion" property="recomendacion" />
		<result column="codigo_historia_anterior" property="codigo_historia_anterior" />
		<result column="tipo_historia" property="tipo_historia" />
		<result column="creacion_date" property="creacion_date" />
		<result column="ultimo_update" property="ultimo_update" />
		<result column="creacion_user" property="creacion_user" />
		<result column="delete_date" property="delete_date" />
		<result column="ultimo_user" property="ultimo_user" />
		<result column="delete_user" property="delete_user" />
		<result column="otros_piso" property="otros_piso" />
		<result column="otros_paredes" property="otros_paredes" />
		<result column="otros_techo" property="otros_techo" />
		<result column="otros_excretas" property="otros_excretas" />
	</resultMap>

	<insert id="crear" parameterType="visita_domiciliaria">
		insert into public.visita_domiciliaria (codigo_empresa,codigo_sucursal,
		codigo_historia,identificacion,fecha_inicial,
		nro_ingreso,notifica,otros_notifica,
		barrio,localidad,codigo_usuario,
		parentesco,familiar_nombre1,familiar_edad1,
		familiar_escolaridad1,familiar_parentesco1,familiar_ocupacion1,
		familiar_nombre2,familiar_edad2,familiar_escolaridad2,
		familiar_parentesco2,familiar_ocupacion2,familiar_nombre3,
		familiar_edad3,familiar_escolaridad3,familiar_parentesco3,
		familiar_ocupacion3,familiar_nombre4,familiar_edad4,
		familiar_escolaridad4,familiar_parentesco4,familiar_ocupacion4,
		familiar_nombre5,familiar_edad5,familiar_escolaridad5,
		familiar_parentesco5,familiar_ocupacion5,familiar_nombre6,
		familiar_edad6,familiar_escolaridad6,familiar_parentesco6,
		familiar_ocupacion6,familiar_nombre7,familiar_edad7,
		familiar_escolaridad7,familiar_parentesco7,familiar_ocupacion7,
		familiar_nombre8,familiar_edad8,familiar_escolaridad8,
		familiar_parentesco8,familiar_ocupacion8,familiar_nombre9,
		familiar_edad9,familiar_escolaridad9,familiar_parentesco9,
		familiar_ocupacion9,familiar_nombre10,familiar_edad10,
		familiar_escolaridad10,familiar_parentesco10,familiar_ocupacion10,
		techo,piso,paredes,
		no_habitaciones,eliminacion_excretas,recoleccion,
		agua_potable,enfermedad_actual,recibido_medico,
		tipo_atencion,entidad,profesional,
		motivo,historia_enfermedad_actual,acciones_pyp,
		canalizacion,entidad_canalizacion,tratamiento_actual,
		actitud_familiares,percepcion,disposicion,
		percepcion_paciente,
		observacion,seguimiento,recomendacion,
		codigo_historia_anterior,tipo_historia,creacion_date,
		ultimo_update,creacion_user,delete_date,
		ultimo_user,delete_user, otros_piso, otros_paredes, otros_techo, otros_excretas,
		cie_principal,      
		tipo_principal,     
		cie_relacionado1,   
		tipo_relacionado1,  
		cie_relacionado2,   
		tipo_relacionado2,  
		cie_relacionado3,   
		tipo_relacionado3,  
		finalidad_consulta, 
		codigo_consulta_pyp,
		causas_externas)

		values (#{codigo_empresa},#{codigo_sucursal},
		#{codigo_historia},#{identificacion},#{fecha_inicial},
		#{nro_ingreso},#{notifica},#{otros_notifica},
		#{barrio},#{localidad},#{codigo_usuario},
		#{parentesco},#{familiar_nombre1},#{familiar_edad1},
		#{familiar_escolaridad1},#{familiar_parentesco1},#{familiar_ocupacion1},
		#{familiar_nombre2},#{familiar_edad2},#{familiar_escolaridad2},
		#{familiar_parentesco2},#{familiar_ocupacion2},#{familiar_nombre3},
		#{familiar_edad3},#{familiar_escolaridad3},#{familiar_parentesco3},
		#{familiar_ocupacion3},#{familiar_nombre4},#{familiar_edad4},
		#{familiar_escolaridad4},#{familiar_parentesco4},#{familiar_ocupacion4},
		#{familiar_nombre5},#{familiar_edad5},#{familiar_escolaridad5},
		#{familiar_parentesco5},#{familiar_ocupacion5},#{familiar_nombre6},
		#{familiar_edad6},#{familiar_escolaridad6},#{familiar_parentesco6},
		#{familiar_ocupacion6},#{familiar_nombre7},#{familiar_edad7},
		#{familiar_escolaridad7},#{familiar_parentesco7},#{familiar_ocupacion7},
		#{familiar_nombre8},#{familiar_edad8},#{familiar_escolaridad8},
		#{familiar_parentesco8},#{familiar_ocupacion8},#{familiar_nombre9},
		#{familiar_edad9},#{familiar_escolaridad9},#{familiar_parentesco9},
		#{familiar_ocupacion9},#{familiar_nombre10},#{familiar_edad10},
		#{familiar_escolaridad10},#{familiar_parentesco10},#{familiar_ocupacion10},
		#{techo},#{piso},#{paredes},
		#{no_habitaciones},#{eliminacion_excretas},#{recoleccion},
		#{agua_potable},#{enfermedad_actual},#{recibido_medico},
		#{tipo_atencion},#{entidad},#{profesional},
		#{motivo},#{historia_enfermedad_actual},#{acciones_pyp},
		#{canalizacion},#{entidad_canalizacion},#{tratamiento_actual},
		#{actitud_familiares},#{percepcion},#{disposicion},
		#{percepcion_paciente},
		#{observacion},#{seguimiento},#{recomendacion},
		#{codigo_historia_anterior},#{tipo_historia},#{creacion_date},
		#{ultimo_update},#{creacion_user},#{delete_date},
		#{ultimo_user},#{delete_user},#{otros_piso},#{otros_paredes},
		#{otros_techo},#{otros_excretas},
		#{cie_principal},      
		#{tipo_principal},     
		#{cie_relacionado1},   
		#{tipo_relacionado1},  
		#{cie_relacionado2},   
		#{tipo_relacionado2},  
		#{cie_relacionado3},   
		#{tipo_relacionado3},  
		#{finalidad_consulta}, 
		#{codigo_consulta_pyp},
		#{causas_externas})
	</insert>

	<update id="actualizar" parameterType="visita_domiciliaria">
		update public.visita_domiciliaria set codigo_empresa = #{codigo_empresa},
		codigo_sucursal = #{codigo_sucursal},codigo_historia = #{codigo_historia},
		identificacion = #{identificacion},fecha_inicial = #{fecha_inicial},
		nro_ingreso = #{nro_ingreso},notifica = #{notifica},
		otros_notifica = #{otros_notifica},barrio = #{barrio},
		localidad = #{localidad},codigo_usuario = #{codigo_usuario},
		parentesco = #{parentesco},familiar_nombre1 = #{familiar_nombre1},
		familiar_edad1 = #{familiar_edad1},familiar_escolaridad1 = #{familiar_escolaridad1},
		familiar_parentesco1 = #{familiar_parentesco1},familiar_ocupacion1 = #{familiar_ocupacion1},
		familiar_nombre2 = #{familiar_nombre2},familiar_edad2 = #{familiar_edad2},
		familiar_escolaridad2 = #{familiar_escolaridad2},familiar_parentesco2 = #{familiar_parentesco2},
		familiar_ocupacion2 = #{familiar_ocupacion2},familiar_nombre3 = #{familiar_nombre3},
		familiar_edad3 = #{familiar_edad3},familiar_escolaridad3 = #{familiar_escolaridad3},
		familiar_parentesco3 = #{familiar_parentesco3},familiar_ocupacion3 = #{familiar_ocupacion3},
		familiar_nombre4 = #{familiar_nombre4},familiar_edad4 = #{familiar_edad4},
		familiar_escolaridad4 = #{familiar_escolaridad4},familiar_parentesco4 = #{familiar_parentesco4},
		familiar_ocupacion4 = #{familiar_ocupacion4},familiar_nombre5 = #{familiar_nombre5},
		familiar_edad5 = #{familiar_edad5},familiar_escolaridad5 = #{familiar_escolaridad5},
		familiar_parentesco5 = #{familiar_parentesco5},familiar_ocupacion5 = #{familiar_ocupacion5},
		familiar_nombre6 = #{familiar_nombre6},familiar_edad6 = #{familiar_edad6},
		familiar_escolaridad6 = #{familiar_escolaridad6},familiar_parentesco6 = #{familiar_parentesco6},
		familiar_ocupacion6 = #{familiar_ocupacion6},familiar_nombre7 = #{familiar_nombre7},
		familiar_edad7 = #{familiar_edad7},familiar_escolaridad7 = #{familiar_escolaridad7},
		familiar_parentesco7 = #{familiar_parentesco7},familiar_ocupacion7 = #{familiar_ocupacion7},
		familiar_nombre8 = #{familiar_nombre8},familiar_edad8 = #{familiar_edad8},
		familiar_escolaridad8 = #{familiar_escolaridad8},familiar_parentesco8 = #{familiar_parentesco8},
		familiar_ocupacion8 = #{familiar_ocupacion8},familiar_nombre9 = #{familiar_nombre9},
		familiar_edad9 = #{familiar_edad9},familiar_escolaridad9 = #{familiar_escolaridad9},
		familiar_parentesco9 = #{familiar_parentesco9},familiar_ocupacion9 = #{familiar_ocupacion9},
		familiar_nombre10 = #{familiar_nombre10},familiar_edad10 = #{familiar_edad10},
		familiar_escolaridad10 = #{familiar_escolaridad10},familiar_parentesco10 = #{familiar_parentesco10},
		familiar_ocupacion10 = #{familiar_ocupacion10},techo = #{techo},
		piso = #{piso},paredes = #{paredes},
		no_habitaciones = #{no_habitaciones},eliminacion_excretas = #{eliminacion_excretas},
		recoleccion = #{recoleccion},agua_potable = #{agua_potable},
		enfermedad_actual = #{enfermedad_actual},recibido_medico = #{recibido_medico},
		tipo_atencion = #{tipo_atencion},entidad = #{entidad},
		profesional = #{profesional},motivo = #{motivo},
		historia_enfermedad_actual = #{historia_enfermedad_actual},acciones_pyp = #{acciones_pyp},
		canalizacion = #{canalizacion},entidad_canalizacion = #{entidad_canalizacion},
		tratamiento_actual = #{tratamiento_actual},actitud_familiares = #{actitud_familiares},
		percepcion = #{percepcion},disposicion = #{disposicion},
		percepcion_paciente = #{percepcion_paciente},observacion = #{observacion},
		seguimiento = #{seguimiento},recomendacion = #{recomendacion},
		codigo_historia_anterior = #{codigo_historia_anterior},tipo_historia = #{tipo_historia},
		creacion_date = #{creacion_date},ultimo_update = #{ultimo_update},
		creacion_user = #{creacion_user},delete_date = #{delete_date},
		ultimo_user = #{ultimo_user},delete_user = #{delete_user},
		otros_piso = #{otros_piso}, otros_paredes = #{otros_paredes},
		otros_techo = #{otros_techo},otros_excretas = #{otros_excretas},
		cie_principal = #{cie_principal},      
		tipo_principal = #{tipo_principal},     
		cie_relacionado1 = #{cie_relacionado1},   
		tipo_relacionado1 = #{tipo_relacionado1},  
		cie_relacionado2 = #{cie_relacionado2},   
		tipo_relacionado2 = #{tipo_relacionado2},  
		cie_relacionado3 = #{cie_relacionado3},   
		tipo_relacionado3 = #{tipo_relacionado3},  
		finalidad_consulta = #{finalidad_consulta}, 
		codigo_consulta_pyp = #{codigo_consulta_pyp},
		causas_externas = #{causas_externas} 
		where codigo_empresa = #{codigo_empresa}
		and codigo_sucursal = #{codigo_sucursal}
		and codigo_historia = #{codigo_historia}

	</update>

	<select id="consultar" parameterType="visita_domiciliaria" resultMap="visita_domiciliariaMap">
		select codigo_empresa,codigo_sucursal,
		codigo_historia,identificacion,fecha_inicial,nro_ingreso,
		notifica,otros_notifica,barrio,localidad,
		codigo_usuario,parentesco,familiar_nombre1,familiar_edad1,
		familiar_escolaridad1,familiar_parentesco1,familiar_ocupacion1,familiar_nombre2,
		familiar_edad2,familiar_escolaridad2,familiar_parentesco2,familiar_ocupacion2,
		familiar_nombre3,familiar_edad3,familiar_escolaridad3,familiar_parentesco3,
		familiar_ocupacion3,familiar_nombre4,familiar_edad4,familiar_escolaridad4,
		familiar_parentesco4,familiar_ocupacion4,familiar_nombre5,familiar_edad5,
		familiar_escolaridad5,familiar_parentesco5,familiar_ocupacion5,familiar_nombre6,
		familiar_edad6,familiar_escolaridad6,familiar_parentesco6,familiar_ocupacion6,
		familiar_nombre7,familiar_edad7,familiar_escolaridad7,familiar_parentesco7,
		familiar_ocupacion7,familiar_nombre8,familiar_edad8,familiar_escolaridad8,
		familiar_parentesco8,familiar_ocupacion8,familiar_nombre9,familiar_edad9,
		familiar_escolaridad9,familiar_parentesco9,familiar_ocupacion9,familiar_nombre10,
		familiar_edad10,familiar_escolaridad10,familiar_parentesco10,familiar_ocupacion10,
		techo,piso,paredes,no_habitaciones,
		eliminacion_excretas,recoleccion,agua_potable,enfermedad_actual,
		recibido_medico,tipo_atencion,entidad,profesional,
		motivo,historia_enfermedad_actual,acciones_pyp,canalizacion,
		entidad_canalizacion,tratamiento_actual,actitud_familiares,percepcion,
		disposicion,percepcion_paciente,observacion,seguimiento,
		recomendacion,codigo_historia_anterior,tipo_historia,creacion_date,
		ultimo_update,creacion_user,delete_date,ultimo_user,
		delete_user, otros_piso, otros_paredes, otros_techo, otros_excretas,
		cie_principal,      
		tipo_principal,     
		cie_relacionado1,   
		tipo_relacionado1,  
		cie_relacionado2,   
		tipo_relacionado2,  
		cie_relacionado3,   
		tipo_relacionado3,  
		finalidad_consulta, 
		codigo_consulta_pyp,
		causas_externas 
		from public.visita_domiciliaria where codigo_empresa = #{codigo_empresa}
		and codigo_sucursal = #{codigo_sucursal} and codigo_historia = #{codigo_historia}
	</select>
	
	<select id="consultar_historia" resultMap="visita_domiciliariaMap" parameterType="visita_domiciliaria">
		select codigo_empresa,codigo_sucursal,
		codigo_historia,identificacion,fecha_inicial,nro_ingreso,
		notifica,otros_notifica,barrio,localidad,
		codigo_usuario,parentesco,familiar_nombre1,familiar_edad1,
		familiar_escolaridad1,familiar_parentesco1,familiar_ocupacion1,familiar_nombre2,
		familiar_edad2,familiar_escolaridad2,familiar_parentesco2,familiar_ocupacion2,
		familiar_nombre3,familiar_edad3,familiar_escolaridad3,familiar_parentesco3,
		familiar_ocupacion3,familiar_nombre4,familiar_edad4,familiar_escolaridad4,
		familiar_parentesco4,familiar_ocupacion4,familiar_nombre5,familiar_edad5,
		familiar_escolaridad5,familiar_parentesco5,familiar_ocupacion5,familiar_nombre6,
		familiar_edad6,familiar_escolaridad6,familiar_parentesco6,familiar_ocupacion6,
		familiar_nombre7,familiar_edad7,familiar_escolaridad7,familiar_parentesco7,
		familiar_ocupacion7,familiar_nombre8,familiar_edad8,familiar_escolaridad8,
		familiar_parentesco8,familiar_ocupacion8,familiar_nombre9,familiar_edad9,
		familiar_escolaridad9,familiar_parentesco9,familiar_ocupacion9,familiar_nombre10,
		familiar_edad10,familiar_escolaridad10,familiar_parentesco10,familiar_ocupacion10,
		techo,piso,paredes,no_habitaciones,
		eliminacion_excretas,recoleccion,agua_potable,enfermedad_actual,
		recibido_medico,tipo_atencion,entidad,profesional,
		motivo,historia_enfermedad_actual,acciones_pyp,canalizacion,
		entidad_canalizacion,tratamiento_actual,actitud_familiares,percepcion,
		disposicion,percepcion_paciente,observacion,seguimiento,
		recomendacion,codigo_historia_anterior,tipo_historia,creacion_date,
		ultimo_update,creacion_user,delete_date,ultimo_user,
		delete_user, otros_piso, otros_paredes, otros_techo, otros_excretas,
		cie_principal,      
		tipo_principal,     
		cie_relacionado1,   
		tipo_relacionado1,  
		cie_relacionado2,   
		tipo_relacionado2,  
		cie_relacionado3,   
		tipo_relacionado3,  
		finalidad_consulta, 
		codigo_consulta_pyp,
		causas_externas 
		from public.visita_domiciliaria where codigo_empresa = #{codigo_empresa}
		and codigo_sucursal = #{codigo_sucursal} and identificacion = #{identificacion}
		ORDER BY codigo_historia DESC LIMIT 1;
	</select>

	
	<delete id="eliminar" parameterType="visita_domiciliaria">
		delete from public.visita_domiciliaria
		where codigo_empresa = #{codigo_empresa}
		and codigo_sucursal = #{codigo_sucursal} and codigo_historia = #{codigo_historia}
	</delete>

	<select id="listar" parameterType="java.util.Map" resultMap="visita_domiciliariaMap">
		select a.codigo_empresa,a.codigo_sucursal,
		a.codigo_historia,a.identificacion,a.fecha_inicial,a.nro_ingreso,
		notifica,otros_notifica,barrio,localidad,
		codigo_usuario,parentesco,familiar_nombre1,familiar_edad1,
		familiar_escolaridad1,familiar_parentesco1,familiar_ocupacion1,familiar_nombre2,
		familiar_edad2,familiar_escolaridad2,familiar_parentesco2,familiar_ocupacion2,
		familiar_nombre3,familiar_edad3,familiar_escolaridad3,familiar_parentesco3,
		familiar_ocupacion3,familiar_nombre4,familiar_edad4,familiar_escolaridad4,
		familiar_parentesco4,familiar_ocupacion4,familiar_nombre5,familiar_edad5,
		familiar_escolaridad5,familiar_parentesco5,familiar_ocupacion5,familiar_nombre6,
		familiar_edad6,familiar_escolaridad6,familiar_parentesco6,familiar_ocupacion6,
		familiar_nombre7,familiar_edad7,familiar_escolaridad7,familiar_parentesco7,
		familiar_ocupacion7,familiar_nombre8,familiar_edad8,familiar_escolaridad8,
		familiar_parentesco8,familiar_ocupacion8,familiar_nombre9,familiar_edad9,
		familiar_escolaridad9,familiar_parentesco9,familiar_ocupacion9,familiar_nombre10,
		familiar_edad10,familiar_escolaridad10,familiar_parentesco10,familiar_ocupacion10,
		techo,piso,paredes,no_habitaciones,
		eliminacion_excretas,recoleccion,agua_potable,enfermedad_actual,
		recibido_medico,tipo_atencion,entidad,profesional,
		motivo,historia_enfermedad_actual,acciones_pyp,canalizacion,
		entidad_canalizacion,tratamiento_actual,actitud_familiares,percepcion,
		disposicion,percepcion_paciente,observacion,seguimiento,
		recomendacion,codigo_historia_anterior,tipo_historia,
		cie_principal,      
		tipo_principal,     
		cie_relacionado1,   
		tipo_relacionado1,  
		cie_relacionado2,   
		tipo_relacionado2,  
		cie_relacionado3,   
		tipo_relacionado3,  
		finalidad_consulta, 
		codigo_consulta_pyp,
		causas_externas,
		a.creacion_date,a.ultimo_update,a.creacion_user,
		a.delete_date,a.ultimo_user,a.delete_user, otros_piso, otros_paredes, otros_techo, otros_excretas
		from public.visita_domiciliaria a
		
		<trim prefix="WHERE" prefixOverrides="AND |OR ">
			<if test="codigo_empresa != null">
			AND codigo_empresa = #{codigo_empresa}
			</if>
			<if test="codigo_sucursal != null">
			AND codigo_sucursal = #{codigo_sucursal}
			</if>
			<if test="identificacion != null">
				AND identificacion = #{identificacion}
			</if>
			<if test="fecha_string != null">
   				AND to_char(fecha_inicial, 'yyyy-MM-dd') like '%${fecha_string}%'
   			</if>
   			<if test="tipo_historia != null">
   				AND tipo_historia = #{tipo_historia}
   			</if>
			
			<if test="parameter != null">
				AND ${parameter} like '${value}'
			</if>
		</trim>
		
		<if test="order_desc" >
			order by cast(codigo_historia as integer) desc
		</if>
		<if test="limite_paginado != null">
		${limite_paginado}
		</if>
		
	</select>

	<select id="existe" resultType="java.lang.Boolean">
		select count(1) != 0 AS exist 		from public.visita_domiciliaria 
		<trim prefix="WHERE" prefixOverrides="AND |OR ">
			<if test="codigo_empresa != null">
			AND codigo_empresa = #{codigo_empresa}
			</if>
			<if test="codigo_sucursal != null">
			AND codigo_sucursal = #{codigo_sucursal}
			</if>
			<if test="parameter != null">
			AND ${parameter} like '${value}'
			</if>
		</trim>
		<if test="limit != null">
		${limit}
		</if>
	</select>

</mapper>
